(this["webpackJsonphello-world"]=this["webpackJsonphello-world"]||[]).push([[0],{41:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},56:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(17),i=a.n(s),c=a(46),l=a(10),r=(a(53),a(4)),o=a(5),d=a(8),h=a(7),u=a(6),j=(a(54),a.p+"static/media/logo.6ce24c58.svg"),p=a(1),m=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(r.a)(this,a),(n=t.call(this,e)).logobackground={width:"210px",height:"125px",padding:"30px"},n.clock={position:"absolute",top:"30px",right:"30px",fontSize:"50px"};var s=new Date;return n.state={today:s.toLocaleString()},n.tick=n.tick.bind(Object(d.a)(n)),n}return Object(o.a)(a,[{key:"tick",value:function(){var e=new Date;this.setState({today:e.toLocaleString()})}},{key:"componentDidMount",value:function(){this.timerID=setInterval(this.tick,1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"render",value:function(){return Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"mb-auto",children:[Object(p.jsx)("div",{style:this.logobackground,children:Object(p.jsx)("a",{href:"/",children:Object(p.jsx)("img",{src:j,width:"150px"})})}),Object(p.jsx)("div",{style:this.clock,onClick:function(){return window.location.replace("/manage")},children:this.state.today})]})})}}]),a}(n.Component),b=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={carousel_items:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/picture",{method:"GET"}).then((function(e){return e.json()})).then((function(t){var a=!0,n=[];console.log("Picture:",typeof t,t),Object.values(t).forEach((function(t){a?e.props.compareDate(t.startAt,t.expiredAt)&&(n.push(Object(p.jsx)("div",{className:"carousel-item active",children:Object(p.jsx)("img",{src:t.filename,width:"100%",style:{height:e.props.height-20,padding:"10px"}})},t.id)),a=!1):e.props.compareDate(t.startAt,t.expiredAt)&&n.push(Object(p.jsx)("div",{className:"carousel-item",children:Object(p.jsx)("img",{src:t.filename,width:"100%",style:{height:e.props.height-20,padding:"10px"}})},t.id))})),e.setState({carousel_items:n})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(p.jsx)("div",{className:"carousel slide","data-bs-ride":"carousel",children:Object(p.jsx)("div",{className:"carousel-inner",children:this.state.carousel_items})})}}]),a}(n.Component),f=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={vidoesoource:""},n.playorder=0,n.playlist=[],n.handleOnended=n.handleOnended.bind(Object(d.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/video",{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("Video:",typeof t,t),Object.values(t).forEach((function(t){e.props.compareDate(t.startAt,t.expiredAt)&&e.playlist.push(t.filename)})),e.setState({vidoesoource:t[0].filename}),document.getElementById("myvideo").load(),document.getElementById("myvideo").play()})).catch((function(e){console.log(e)}))}},{key:"handleOnended",value:function(e){this.playorder++,console.log(this.playlist[this.playorder%this.playlist.length]),this.setState({vidoesoource:this.playlist[this.playorder%this.playlist.length]}),document.getElementById("myvideo").load(),document.getElementById("myvideo").play()}},{key:"render",value:function(){return Object(p.jsxs)("video",{id:"myvideo",className:"center",autoPlay:!0,muted:!0,width:"95%",onEnded:this.handleOnended,children:[Object(p.jsx)("source",{src:this.state.vidoesoource,type:"video/mp4"}),Object(p.jsx)("source",{src:this.state.vidoesoource,type:"video/webm"}),Object(p.jsx)("source",{src:this.state.vidoesoource,type:"video/ogg"})]})}}]),a}(n.Component),x=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={marquee:"\u9019\u662f\u8dd1\u99ac\u71c8\u7684\u5167\u5bb9",marqueeDuration:40},n.index=0,n.textlist=[],n.changetext=n.changetext.bind(Object(d.a)(n)),n}return Object(o.a)(a,[{key:"changetext",value:function(){this.textlist.length>0&&(this.index++,this.setState({marquee:this.textlist[this.index%this.textlist.length]}))}},{key:"componentDidMount",value:function(){var e=this;fetch("/text",{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("Marquee:",typeof t,t),Object.values(t).forEach((function(t){e.props.compareDate(t.startAt,t.expiredAt)&&e.textlist.push(t.filename)})),e.setState({marquee:e.textlist[e.index]})})).catch((function(e){console.log(e)})),this.timeID=setInterval(this.changetext,1e3*this.state.marqueeDuration)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeID)}},{key:"render",value:function(){return Object(p.jsx)("div",{className:"marquee",children:Object(p.jsx)("p",{style:{animationDuration:this.state.marqueeDuration+"S"},children:this.state.marquee})})}}]),a}(n.Component),O=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={},n.bodyheight=screen.height-125-85,n.dateInRange=n.dateInRange.bind(Object(d.a)(n)),n}return Object(o.a)(a,[{key:"dateInRange",value:function(e,t){var a=new Date,n=new Date(e),s=new Date(t);return a.getTime()>=n.getTime()&&a.getTime()<=s.getTime()}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(m,{}),Object(p.jsxs)("div",{className:"row",style:{"--bs-gutter-x":0,height:this.bodyheight},children:[Object(p.jsx)("div",{className:"col-8 col-md-8 pos-r",children:Object(p.jsx)(f,{compareDate:this.dateInRange})}),Object(p.jsx)("div",{className:"col-4 col-md-4",children:Object(p.jsx)(b,{compareDate:this.dateInRange,height:this.bodyheight})})]}),Object(p.jsx)(x,{compareDate:this.dateInRange})]})}}]),a}(n.Component),v=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){setTimeout((function(){window.location.replace("/login")}),3e3)}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"forbidden",style:{height:screen.availHeight},children:[Object(p.jsx)("h1",{children:"403"}),Object(p.jsx)("p",{children:"access not granted"}),Object(p.jsx)("span",{className:"support",children:Object(p.jsx)("a",{href:"/login",children:"redirect login in 3s"})})]})}}]),a}(n.Component),g=v,y=(a(56),a(33)),w=a(21),N=a.n(w),k=(a(30),new RegExp("^[a-zA-Z0-9._:$!%-]+@[a-zA-Z0-9.-]+.[a-zA-Z]$"),new RegExp("[A-Za-z0-9]{6,}"),new RegExp(/^\S.*\S?$/)),S=new RegExp(/^(\S+)\.(mp4|MP4|ogg|OGG|webm|WEBM)$/),A=new RegExp(/^(\S+)\.(jpg|JPG|gif|GIF|png|PNG)$/),C=a(12),D=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(r.a)(this,a),n=t.call(this,e);var s=new Date;return n.state={type:n.props.type,isVaild:!1,text:"",filetext:"",video:null,picture:null,startAt:new Date(s.getFullYear(),s.getMonth(),s.getDate()),expiredAt:new Date(s.getFullYear(),s.getMonth(),s.getDate())},n.submitForm=n.submitForm.bind(Object(d.a)(n)),n.renderInputType=n.renderInputType.bind(Object(d.a)(n)),n.handleText=n.handleText.bind(Object(d.a)(n)),n.handleVideo=n.handleVideo.bind(Object(d.a)(n)),n.handlePicture=n.handlePicture.bind(Object(d.a)(n)),n}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(){this.props.type!==this.state.type&&this.setState({type:this.props.type,text:"",filetext:""})}},{key:"renderInputType",value:function(){var e=this;switch(this.state.type){case"\u5efa\u7acb\u8dd1\u99ac\u71c8":return Object(p.jsxs)("div",{className:"input-group has-validation",children:[Object(p.jsx)("input",{type:"text",className:"form-control",placeholder:"\u8dd1\u99ac\u71c8\u5167\u5bb9",value:this.state.text,onChange:function(t){k.test(t.target.value)?e.setState({text:t.target.value,isVaild:!0}):e.setState({text:t.target.value,isVaild:!1})},required:!0,maxLength:"200",pattern:"^\\S.*\\S?$"}),Object(p.jsx)("div",{className:"invalid-feedback font30",id:"invaildresponse",children:Object(p.jsx)("h6",{children:"\u8dd1\u99ac\u71c8\u5167\u5bb9\u4e0d\u5f97\u5305\u542b\u7a7a\u767d\u5b57\u5143"})})]});case"\u4e0a\u50b3\u5f71\u7247":return Object(p.jsxs)("div",{className:"input-group has-validation",children:[Object(p.jsx)("input",{type:"file",className:"form-control",accept:"video/mp4, video/webm, video/ogg",value:this.state.filetext,onChange:function(t){e.setState({filetext:t.target.value,video:t.target.files})},required:!0,multiple:!0}),Object(p.jsx)("div",{className:"invalid-feedback font30",id:"invaildresponse",children:Object(p.jsx)("h6",{children:"\u5f71\u7247\u5167\u5bb9\u4e0d\u5f97\u70ba\u7a7a"})})]});case"\u4e0a\u50b3\u5716\u7247":return Object(p.jsxs)("div",{className:"input-group has-validation",children:[Object(p.jsx)("input",{type:"file",className:"form-control",accept:"image/png, image/jpeg, image/gif",value:this.state.filetext,onChange:function(t){e.setState({filetext:t.target.value,picture:t.target.files})},required:!0,multiple:!0}),Object(p.jsx)("div",{className:"invalid-feedback font30",id:"invaildresponse",children:Object(p.jsx)("h6",{children:"\u5716\u7247\u5167\u5bb9\u4e0d\u5f97\u70ba\u7a7a"})})]})}}},{key:"handleText",value:function(){k.test(this.state.text)&&fetch("/text",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+window.localStorage.getItem("token")},body:JSON.stringify({filename:this.state.text,startAt:this.state.startAt,expiredAt:this.state.expiredAt})}).then((function(e){return e.json()})).then((function(e){alert(e.filename+" \u5efa\u7acb\u65bc "+e.createAt),console.log(e)})).catch((function(e){alert(e),console.log(e)}))}},{key:"handleVideo",value:function(){var e,t=Object(y.a)(this.state.video);try{for(t.s();!(e=t.n()).done;){var a=e.value,n=new FormData;n.append("video",a),n.append("startAt",this.state.startAt),n.append("expiredAt",this.state.expiredAt),fetch("/video",{method:"POST",headers:{Authorization:"Bearer "+window.localStorage.getItem("token")},body:n}).then((function(e){return e.json()})).then((function(e){alert(e.filename+" \u5efa\u7acb"),console.log(e)})).catch((function(e){alert(e),console.log(e)}))}}catch(s){t.e(s)}finally{t.f()}}},{key:"handlePicture",value:function(){var e,t=Object(y.a)(this.state.picture);try{for(t.s();!(e=t.n()).done;){var a=e.value,n=new FormData;n.append("image",a),n.append("startAt",this.state.startAt),n.append("expiredAt",this.state.expiredAt),fetch("/picture",{method:"POST",headers:{Authorization:"Bearer "+window.localStorage.getItem("token")},body:n}).then((function(e){return e.json()})).then((function(e){alert(e.filename+" \u5efa\u7acb"),console.log(e)})).catch((function(e){alert(e),console.log(e)}))}}catch(s){t.e(s)}finally{t.f()}}},{key:"submitForm",value:function(e){switch(this.props.type){case"\u5efa\u7acb\u8dd1\u99ac\u71c8":k.test(this.state.text)?(document.getElementById("invaildresponse").style.display="none",this.handleText()):document.getElementById("invaildresponse").style.display="block";break;case"\u4e0a\u50b3\u5f71\u7247":S.test(this.state.filetext)?(document.getElementById("invaildresponse").style.display="none",this.handleVideo()):document.getElementById("invaildresponse").style.display="block";break;case"\u4e0a\u50b3\u5716\u7247":A.test(this.state.filetext)?(document.getElementById("invaildresponse").style.display="none",this.handlePicture()):document.getElementById("invaildresponse").style.display="block"}e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this,t=C({"needs-validation":!0,"was-validated":this.state.isVaild});return Object(p.jsx)("form",{className:t,noValidate:!0,onSubmit:this.submitForm,children:Object(p.jsxs)("div",{className:"row g-3",children:[Object(p.jsxs)("div",{className:"col-12",children:[Object(p.jsx)("label",{className:"form-label font30",children:this.props.type}),this.renderInputType()]}),Object(p.jsxs)("div",{className:"col-sm-6",children:[Object(p.jsx)("label",{className:"form-label font30 d-block",children:"\u958b\u59cb\u6642\u9593"}),Object(p.jsx)(N.a,{className:"bg-w",value:this.state.startAt,onChange:function(t){e.setState({startAt:t})}})]}),Object(p.jsxs)("div",{className:"col-sm-6",children:[Object(p.jsx)("label",{className:"form-label font30 d-block",children:"\u7d50\u675f\u6642\u9593"}),Object(p.jsx)(N.a,{className:"bg-w",value:this.state.expiredAt,onChange:function(t){e.setState({expiredAt:t})}})]}),Object(p.jsx)("button",{className:"w-100 btn btn-primary btn-lg",type:"submit",children:"\u4e0a\u50b3"})]})})}}]),a}(n.Component),I=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return Object(p.jsxs)("ul",{className:"list-group mb-3",children:[Object(p.jsx)("li",{className:"list-group-item d-flex justify-content-between lh-sm",children:Object(p.jsxs)("div",{className:"eventbtn",onClick:function(){e.props.handleClick("\u5efa\u7acb\u8dd1\u99ac\u71c8")},children:[Object(p.jsx)("h6",{className:"my-0",children:"Upload"}),Object(p.jsx)("div",{className:"text-muted",children:"\u5efa\u7acb\u8dd1\u99ac\u71c8"})]})}),Object(p.jsx)("li",{className:"list-group-item d-flex justify-content-between lh-sm",children:Object(p.jsx)("div",{className:"eventbtn",onClick:function(){e.props.handleClick("\u4e0a\u50b3\u5f71\u7247")},children:Object(p.jsx)("div",{className:"text-muted",children:"\u4e0a\u50b3\u5f71\u7247"})})}),Object(p.jsx)("li",{className:"list-group-item d-flex justify-content-between lh-sm",children:Object(p.jsx)("div",{className:"eventbtn",onClick:function(){e.props.handleClick("\u4e0a\u50b3\u5716\u7247")},children:Object(p.jsx)("div",{className:"text-muted",children:"\u4e0a\u50b3\u5716\u7247"})})}),Object(p.jsx)("li",{className:"list-group-item d-flex justify-content-between lh-sm",children:Object(p.jsxs)("div",{className:"eventbtn",onClick:function(){e.props.handleClick("\u8dd1\u99ac\u71c8\u7ba1\u7406")},children:[Object(p.jsx)("h6",{className:"my-0",children:"File management"}),Object(p.jsx)("div",{className:"text-muted",children:"\u8dd1\u99ac\u71c8\u7ba1\u7406"})]})}),Object(p.jsx)("li",{className:"list-group-item d-flex justify-content-between lh-sm",children:Object(p.jsx)("div",{className:"eventbtn",onClick:function(){e.props.handleClick("\u5f71\u7247\u7ba1\u7406")},children:Object(p.jsx)("div",{className:"text-muted",children:"\u5f71\u7247\u7ba1\u7406"})})}),Object(p.jsx)("li",{className:"list-group-item d-flex justify-content-between lh-sm",children:Object(p.jsx)("div",{className:"eventbtn",onClick:function(){e.props.handleClick("\u5716\u7247\u7ba1\u7406")},children:Object(p.jsx)("div",{className:"text-muted",children:"\u5716\u7247\u7ba1\u7406"})})})]})}}]),a}(n.Component),E=a(90),T=a(12),M=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={id:n.props.id,filename:n.props.filename,startAt:n.props.startAt,expiredAt:n.props.expiredAt,newFilename:n.props.filename,newStartAt:n.props.startAt,newExpiredAt:n.props.expiredAt,enabled:n.props.enabled,deleted:!1,isVaild:!0},n.typeMap=new Map,n.typeMap.set("\u8dd1\u99ac\u71c8\u7ba1\u7406","text"),n.typeMap.set("\u5716\u7247\u7ba1\u7406","picture"),n.typeMap.set("\u5f71\u7247\u7ba1\u7406","video"),n.timeFormat=n.timeFormat.bind(Object(d.a)(n)),n.updateItem=n.updateItem.bind(Object(d.a)(n)),n.deleteItem=n.deleteItem.bind(Object(d.a)(n)),n}return Object(o.a)(a,[{key:"updateItem",value:function(e){var t=this;this.state.isVaild&&fetch("/"+this.typeMap.get(this.props.type)+"/"+e,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+window.localStorage.getItem("token")},body:JSON.stringify({filename:this.state.newFilename,startAt:this.state.newStartAt,expiredAt:this.state.newExpiredAt,enabled:this.state.enabled})}).then((function(e){return e.json()})).then((function(e){alert(e.id+"\u6210\u529f\u66f4\u65b0"),t.setState({filename:t.state.newFilename,startAt:t.state.newStartAt,expiredAt:t.state.newExpiredAt,enabled:t.state.enabled})})).catch((function(e){return console.log(e)}))}},{key:"deleteItem",value:function(e){var t=this;fetch("/"+this.typeMap.get(this.props.type)+"/"+e,{method:"DELETE",headers:{Authorization:"Bearer "+window.localStorage.getItem("token")}}).then((function(){alert(e+"\u6210\u529f\u522a\u9664"),t.setState({deleted:!0})})).catch((function(e){alert(e),console.log(e)}))}},{key:"timeFormat",value:function(e){return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},{key:"render",value:function(){var e=this,t=T({"needs-validation":!0,d_none:this.state.deleted,"was-validated":this.state.isVaild});return Object(p.jsx)("form",{className:t,onSubmit:function(e){e.preventDefault()},children:Object(p.jsx)("div",{className:"row g-3",children:Object(p.jsx)(E.a,{children:Object(p.jsxs)(E.a.Item,{eventKey:"0",children:[Object(p.jsx)(E.a.Header,{children:Object(p.jsxs)("div",{className:"col-12",children:[Object(p.jsxs)("label",{className:"form-label",children:["ID:",this.state.id]}),Object(p.jsxs)("table",{width:"100%",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"\u6a94\u6848\u540d\u7a31"}),Object(p.jsx)("th",{children:"\u958b\u59cb\u65e5\u671f"}),Object(p.jsx)("th",{children:"\u7d50\u675f\u65e5\u671f"})]})}),Object(p.jsx)("tbody",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:this.state.filename}),Object(p.jsx)("td",{children:this.timeFormat(this.state.startAt)}),Object(p.jsx)("td",{children:this.timeFormat(this.state.expiredAt)})]})})]})]})}),Object(p.jsxs)(E.a.Body,{children:[Object(p.jsxs)("div",{className:"col-12 d_inlineblock",children:[Object(p.jsx)("label",{className:"form-label",children:"\u6a94\u6848\u540d\u7a31"}),Object(p.jsx)("div",{className:"input-group has-validation",children:Object(p.jsx)("input",{type:"text",className:"form-control",value:this.state.newFilename,onChange:function(t){switch(e.props.type){case"\u8dd1\u99ac\u71c8\u7ba1\u7406":k.test(t.target.value)?e.setState({newFilename:t.target.value,isVaild:!0}):e.setState({newFilename:t.target.value,isVaild:!1});break;case"\u5f71\u7247\u7ba1\u7406":S.test(t.target.value)?e.setState({newFilename:t.target.value,isVaild:!0}):e.setState({newFilename:t.target.value,isVaild:!1});break;case"\u5716\u7247\u7ba1\u7406":A.test(t.target.value)?e.setState({newFilename:t.target.value,isVaild:!0}):e.setState({newFilename:t.target.value,isVaild:!1})}},required:!0,maxLength:"100",pattern:"\\S+"})})]}),Object(p.jsxs)("div",{className:"col-6 d_inlineblock",children:[Object(p.jsx)("label",{className:"form-label",children:"\u958b\u59cb\u6642\u9593"}),Object(p.jsx)(N.a,{className:"bg-w",value:new Date(this.state.newStartAt),onChange:function(t){e.setState({newStartAt:new Date(t)})}})]}),Object(p.jsxs)("div",{className:"col-6 d_inlineblock",children:[Object(p.jsx)("label",{className:"form-label",children:"\u7d50\u675f\u6642\u9593"}),Object(p.jsx)(N.a,{className:"bg-w",value:new Date(this.state.newExpiredAt),onChange:function(t){e.setState({newExpiredAt:new Date(t)})}})]}),Object(p.jsxs)("div",{className:"col-sm-2 d_inlineblock",children:[Object(p.jsx)("input",{type:"checkbox",checked:this.state.enabled?"checked":"",onChange:function(t){e.setState({enabled:t.target.checked})}}),Object(p.jsx)("label",{className:"form-label",children:"\u555f\u7528"})]}),Object(p.jsx)("div",{className:"col-sm-2 offset-sm-6 d_inlineblock",children:Object(p.jsx)("button",{className:"btn btn-primary btn-lg left-50",type:"submit",onClick:function(){return e.updateItem(e.state.id)},children:"\u66f4\u65b0"})}),Object(p.jsx)("div",{className:"col-sm-2 d_inlineblock",children:Object(p.jsx)("button",{className:"btn btn-primary btn-lg left-50",type:"submit",onClick:function(){return e.deleteItem(e.state.id)},children:"\u522a\u9664"})})]})]})})})})}}]),a}(n.Component),F=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={list:[],type:n.props.type},n.typeMap=new Map,n.typeMap.set("\u8dd1\u99ac\u71c8\u7ba1\u7406","text"),n.typeMap.set("\u5716\u7247\u7ba1\u7406","picture"),n.typeMap.set("\u5f71\u7247\u7ba1\u7406","video"),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.typeMap.get(this.props.type);fetch("/"+t+"/all",{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log(typeof t,t);var a=[];Object.values(t).forEach((function(t){a.push(Object(p.jsx)(M,{id:t.id,filename:t.filename,enabled:t.enabled,startAt:new Date(t.startAt),expiredAt:new Date(t.expiredAt),type:e.props.type},t.id))})),e.setState({list:a})})).catch((function(e){console.log(e)}))}},{key:"componentDidUpdate",value:function(){var e=this,t=this.typeMap.get(this.props.type);this.props.type!==this.state.type&&(this.setState({type:this.props.type}),fetch("/"+t+"/all",{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log(typeof t,t);var a=[];Object.values(t).forEach((function(t){a.push(Object(p.jsx)(M,{id:t.id,filename:t.filename,enabled:t.enabled,startAt:new Date(t.startAt),expiredAt:new Date(t.expiredAt),type:e.props.type},t.id))})),e.setState({list:a})})).catch((function(e){console.log(e)})))}},{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{className:"form-label font30",children:this.state.type}),this.state.list]})}}]),a}(n.Component),P=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={event:"\u5efa\u7acb\u8dd1\u99ac\u71c8"},n.bodyheight=screen.height-125,n.handleClickEvent=n.handleClickEvent.bind(Object(d.a)(n)),n.renderClickItem=n.renderClickItem.bind(Object(d.a)(n)),n}return Object(o.a)(a,[{key:"handleClickEvent",value:function(e){this.setState({event:e}),console.log(e)}},{key:"renderClickItem",value:function(){switch(this.state.event){case"\u5efa\u7acb\u8dd1\u99ac\u71c8":return Object(p.jsx)(D,{type:"\u5efa\u7acb\u8dd1\u99ac\u71c8"});case"\u4e0a\u50b3\u5f71\u7247":return Object(p.jsx)(D,{type:"\u4e0a\u50b3\u5f71\u7247"});case"\u4e0a\u50b3\u5716\u7247":return Object(p.jsx)(D,{type:"\u4e0a\u50b3\u5716\u7247"});case"\u8dd1\u99ac\u71c8\u7ba1\u7406":return Object(p.jsx)(F,{type:"\u8dd1\u99ac\u71c8\u7ba1\u7406"});case"\u5f71\u7247\u7ba1\u7406":return Object(p.jsx)(F,{type:"\u5f71\u7247\u7ba1\u7406"});case"\u5716\u7247\u7ba1\u7406":return Object(p.jsx)(F,{type:"\u5716\u7247\u7ba1\u7406"});default:return Object(p.jsx)(D,{})}}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(m,{}),Object(p.jsxs)("div",{className:"row g-5",style:{height:this.bodyheight},children:[Object(p.jsx)("div",{className:"col-md-5 col-lg-4 order-md-last",children:Object(p.jsx)(I,{handleClick:this.handleClickEvent})}),Object(p.jsxs)("div",{className:"col-md-7 col-lg-8",children:[Object(p.jsxs)("h4",{className:"mb-3",children:["Hi ",this.props.username,",Welcome to Myboard"]}),this.renderClickItem()]})]})]})}}]),a}(n.Component),z=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={userlist:[]},n.deleteUser=n.deleteUser.bind(Object(d.a)(n)),n}return Object(o.a)(a,[{key:"deleteUser",value:function(e,t){fetch("/admin/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+window.localStorage.getItem("token")}}).then((function(e){return e.text()})).then((function(t){alert(t),document.getElementById(e).style.display="none"})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;fetch("/admin",{method:"GET",headers:{Authorization:"Bearer "+window.localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(t){console.log(typeof t,t);var a=[];Object.values(t).forEach((function(t){a.push(Object(p.jsxs)("a",{id:t.id,className:"list-group-item list-group-item-action d-flex gap-3 py-3","aria-current":"true",onClick:function(){return e.deleteUser(t.id,t.email)},children:[Object(p.jsx)("div",{style:{writingMode:"vertical-lr"},children:"\u522a \u9664"}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("h6",{className:"mb-0",children:["\u4f7f\u7528\u8005\u540d\u7a31:",t.username]}),Object(p.jsxs)("p",{className:"mb-0 opacity-75",children:["EMAIL:",t.email]}),Object(p.jsxs)("p",{className:"mb-0 opacity-75",children:["\u4f7f\u7528\u8005\u89d2\u8272:",t.webUserRole]}),Object(p.jsxs)("p",{className:"mb-0 opacity-75",children:["\u662f\u5426\u555f\u7528:",t.enabled.toString()]})]})]}))})),e.setState({userlist:a})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(m,{}),Object(p.jsxs)("div",{className:"col-md-8 col-lg-10",style:{marginTop:"20px"},children:[Object(p.jsxs)("h4",{className:"mb-3",children:["Hi ",this.props.username,"\u7ba1\u7406\u8005"]}),Object(p.jsx)("div",{className:"list-group",children:this.state.userlist})]})]})}}]),a}(n.Component),B=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={isAuthorized:!0,username:"Admin",role:"USER",authpage:"FileController"},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/auth/parse",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:window.localStorage.getItem("token")})}).then((function(e){return e.json()})).then((function(t){t.username?e.setState({isAuthorized:!0,username:t.username,role:t.role}):e.setState({isAuthorized:!1}),console.log(t)})).catch((function(e){console.log(e)}))}},{key:"componentDidUpdate",value:function(){this.props.authpage!==this.state.authpage&&this.setState({authpage:this.props.authpage})}},{key:"render",value:function(){return this.state.isAuthorized?"FileController"==this.state.authpage?Object(p.jsx)(P,{username:this.state.username}):"AdminPage"==this.state.authpage&&"ADMIN"==this.state.role?Object(p.jsx)(z,{username:this.state.username}):Object(p.jsx)(g,{}):Object(p.jsx)(g,{})}}]),a}(n.Component),V=(a(41),a.p+"static/media/bootstrap-logo.d3ec2963.svg"),q=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={username:"",password:""},n.handleSignin=n.handleSignin.bind(Object(d.a)(n)),n}return Object(o.a)(a,[{key:"handleSignin",value:function(e){fetch("/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password})}).then((function(e){return e.json()})).then((function(e){console.log(e.token),window.localStorage.setItem("token",e.token),window.location.replace("/")})).catch((function(e){alert(e),console.log(e)})),e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this;return Object(p.jsx)("div",{className:"form-signin text-center pos-r",children:Object(p.jsxs)("form",{className:"center",style:{top:"150px"},onSubmit:this.handleSignin,children:[Object(p.jsx)("img",{className:"mb-4",src:V,alt:"",width:"72",height:"57"}),Object(p.jsx)("h1",{className:"h3 mb-3 fw-normal",children:"Please sign in"}),Object(p.jsxs)("div",{className:"form-floating",children:[Object(p.jsx)("input",{type:"email",className:"form-control",id:"floatingInput",placeholder:"name@example.com",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})}}),Object(p.jsx)("label",{style:{color:"black"},children:"Email address"})]}),Object(p.jsxs)("div",{className:"form-floating",children:[Object(p.jsx)("input",{type:"password",className:"form-control",id:"floatingPassword",placeholder:"Password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}}),Object(p.jsx)("label",{style:{color:"black"},children:"Password"})]}),Object(p.jsx)("div",{className:"checkbox mb-3",children:Object(p.jsx)("label",{children:Object(p.jsx)("a",{href:"/signup",className:"form-label",children:" I wanna sign up!!"})})}),Object(p.jsx)("button",{className:"w-100 btn btn-lg btn-primary",type:"submit",children:"Sign in"}),Object(p.jsx)("p",{className:"mt-5 mb-3 text-muted",style:{color:"#D9D9D9"},children:"\xa9 2017\u20132021"})]})})}}]),a}(n.Component),R=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={username:"",email:"",password:"",retypepassword:""},n.handleSignup=n.handleSignup.bind(Object(d.a)(n)),n}return Object(o.a)(a,[{key:"handleSignup",value:function(e){this.state.password===this.state.retypepassword?fetch("/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,email:this.state.email,password:this.state.password})}).then((function(e){return e.text()})).then((function(e){alert(e),window.location.replace("/")})).catch((function(e){alert(e),console.log(e)})):alert("\u8acb\u78ba\u8a8d\u5bc6\u78bc\u662f\u5426\u8f38\u5165\u6b63\u78ba"),e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this;return Object(p.jsx)("div",{className:"form-signin text-center pos-r",children:Object(p.jsxs)("form",{className:"center needs-validation",style:{top:"150px"},onSubmit:this.handleSignup,children:[Object(p.jsx)("img",{className:"mb-4",src:V,alt:"",width:"72",height:"57"}),Object(p.jsx)("h1",{className:"h3 mb-3 fw-normal",children:"Welcome to join us~"}),Object(p.jsxs)("div",{className:"form-floating "+(""!=this.state.username?"was-validated":"")+" has-validation",children:[Object(p.jsx)("input",{type:"text",className:"form-control",placeholder:"user",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})},required:!0}),Object(p.jsx)("label",{style:{color:"black"},children:"User Name"})]}),Object(p.jsxs)("div",{className:"form-floating "+(""!=this.state.email?"was-validated":"")+" has-validation",style:{marginTop:"10px"},children:[Object(p.jsx)("input",{type:"email",className:"form-control",placeholder:"name@example.com",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})},required:!0,pattern:"^[a-zA-Z0-9._:$!%-]+@[a-zA-Z0-9.-]+.[a-zA-Z]$"}),Object(p.jsx)("label",{style:{color:"black"},children:"Email address"})]}),Object(p.jsxs)("div",{className:"form-floating "+(""!=this.state.password?"was-validated":"")+" has-validation",style:{marginTop:"10px"},children:[Object(p.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},required:!0,pattern:"[A-Za-z0-9]{6,}"}),Object(p.jsx)("label",{style:{color:"black"},children:"Password"})]}),Object(p.jsxs)("div",{className:"form-floating "+(""!=this.state.retypepassword?"was-validated":"")+" has-validation",style:{marginTop:"10px"},children:[Object(p.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",value:this.state.retypepassword,onChange:function(t){return e.setState({retypepassword:t.target.value})},required:!0,pattern:"[A-Za-z0-9]{6,}"}),Object(p.jsx)("label",{style:{color:"black"},children:"Retype Password"})]}),Object(p.jsx)("button",{className:"w-100 btn btn-lg btn-primary",type:"submit",children:"Confirm"}),Object(p.jsx)("p",{className:"mt-5 mb-3 text-muted",style:{color:"#D9D9D9"},children:"\xa9 2017\u20132021"})]})})}}]),a}(n.Component);i.a.render(Object(p.jsx)(c.a,{children:Object(p.jsxs)(l.c,{children:[Object(p.jsx)(l.a,{path:"/signup",children:Object(p.jsx)(R,{})}),Object(p.jsx)(l.a,{path:"/login",children:Object(p.jsx)(q,{})}),Object(p.jsx)(l.a,{path:"/manage",children:Object(p.jsx)(B,{authpage:"FileController"})}),Object(p.jsx)(l.a,{path:"/foradmin",children:Object(p.jsx)(B,{authpage:"AdminPage"})}),Object(p.jsx)(l.a,{path:"/",children:Object(p.jsx)(O,{})})]})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.5242a774.chunk.js.map